const t=document.getElementById("snakeCanvas"),e=document.getElementById("startBtn"),h=t.getContext("2d");function i(){let e=!1;class d{constructor(t,e,h,i,s){this.x=t,this.y=e,this.width=h,this.height=i,this.color=s}draw(){h.beginPath(),h.fillStyle=this.color,h.fillRect(this.x,this.y,this.width,this.height),h.strokeRect(this.x,this.y,this.width,this.height)}}function n(e){let h,i=!0;for(;i;){const s=20*Math.round(Math.random()*(t.width-20)/20),n=20*Math.round(Math.random()*(t.height-20)/20);h=new d(s,n,20,20,"blue"),e.head.x===s&&e.head.y===n||e.body.find((t=>t.x===s&&t.y===n))?i=!0:i=!1}return h}document.onkeydown=function(t){switch(t.keyCode){case 37:a.direction=2===a.direction?2:0,a.moveSnake();break;case 38:a.direction=3===a.direction?3:1,a.moveSnake();break;case 39:a.direction=0===a.direction?0:2,a.moveSnake();break;case 40:a.direction=1===a.direction?1:3,a.moveSnake()}};const a=new class{constructor(e=0){this.direction=2,this.length=e,this.head=new d(t.width/2,t.width/2,20,20,"red"),this.body=[];let h=this.head.x-20;const i=this.head.y;for(let t=0;t<this.length;t++){const t=new d(h,i,20,20,"yellow");this.body.push(t),h-=20}}drawSnake(){if(function(e){const h=e.head,i=h.x<0||h.x>=t.width,s=h.y<0||h.y>=t.height,d=e.body.find((({x:t,y:e})=>h.x===t&&h.y===e));return i||s||d}(this)){clearInterval(r);return confirm(`共吃了${this.body.length-this.length}个食物，重新开始吗`)&&i(),void(s=!0)}this.head.draw();for(let t=0;t<this.body.length;t++)this.body[t].draw()}moveSnake(){const t=new d(this.head.x,this.head.y,this.head.width,this.head.height,"yellow");switch(this.body.unshift(t),e=o&&this.head.x===o.x&&this.head.y===o.y,e?(o=n(this),o.draw(),e=!1):this.body.pop(),this.direction){case 0:this.head.x-=this.head.width;break;case 1:this.head.y-=this.head.height;break;case 2:this.head.x+=this.head.width;break;case 3:this.head.y+=this.head.height}}}(1);a.drawSnake();let o=n(a);o.draw();const r=setInterval((()=>{h.clearRect(0,0,t.width,t.height),h.strokeRect(0,0,Number(t.getAttribute("width")),Number(t.getAttribute("height"))),a.moveSnake(),a.drawSnake(),o.draw()}),100)}h.strokeRect(0,0,Number(t.getAttribute("width")),Number(t.getAttribute("height"))),e.onclick=()=>{s=!0,i()};let s=confirm("是否开始游戏?");s&&i();
//# sourceMappingURL=index.1bd3eaf3.js.map
