{"mappings":"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","sources":["src/drawingboard/main.ts"],"sourcesContent":["const allBtns = document.querySelectorAll(\".pen\");\r\nconst drawCanvas = document.getElementById(\"drawCanvas\") as HTMLCanvasElement;\r\nconst drawCtx = drawCanvas.getContext(\"2d\");\r\n\r\ndrawCanvas.setAttribute(\"width\", String(drawCanvas.offsetWidth));\r\ndrawCanvas.setAttribute(\"height\", String(drawCanvas.offsetHeight));\r\n\r\nlet canvasPen = {\r\n  type: \"line\",\r\n  isDraw: false,\r\n  beginX: 0,\r\n  beginY: 0,\r\n  lineWidth: 6,\r\n  imageData: null,\r\n  color: \"#000\",\r\n  lineFn: function (e: MouseEvent) {\r\n    const x = e.pageX - drawCanvas.offsetLeft;\r\n    const y = e.pageY - drawCanvas.offsetTop;\r\n    drawCtx.clearRect(0, 0, drawCanvas.offsetWidth, drawCanvas.offsetHeight);\r\n    if (canvasPen.imageData != null) {\r\n      drawCtx.putImageData(\r\n        canvasPen.imageData,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        drawCanvas.offsetWidth,\r\n        drawCanvas.offsetHeight\r\n      );\r\n    }\r\n    drawCtx.lineTo(x, y);\r\n    drawCtx.strokeStyle = canvasPen.color;\r\n    drawCtx.lineWidth = canvasPen.lineWidth;\r\n    drawCtx.lineCap = \"round\";\r\n    drawCtx.lineJoin = \"round\";\r\n    drawCtx.stroke();\r\n  },\r\n  rectFn: function (e: MouseEvent) {\r\n    const x = e.pageX - drawCanvas.offsetLeft;\r\n    const y = e.pageY - drawCanvas.offsetTop;\r\n    drawCtx.clearRect(0, 0, drawCanvas.offsetWidth, drawCanvas.offsetHeight);\r\n    if (canvasPen.imageData != null) {\r\n      drawCtx.putImageData(\r\n        canvasPen.imageData,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        drawCanvas.offsetWidth,\r\n        drawCanvas.offsetHeight\r\n      );\r\n    }\r\n    drawCtx.beginPath();\r\n    drawCtx.lineWidth = canvasPen.lineWidth;\r\n    drawCtx.rect(\r\n      canvasPen.beginX,\r\n      canvasPen.beginY,\r\n      x - canvasPen.beginX,\r\n      y - canvasPen.beginY\r\n    );\r\n    drawCtx.strokeStyle = canvasPen.color;\r\n    drawCtx.stroke();\r\n    drawCtx.closePath();\r\n  },\r\n  arcFn: function (e: MouseEvent) {\r\n    const x = e.pageX - drawCanvas.offsetLeft;\r\n    const y = e.pageY - drawCanvas.offsetTop;\r\n    drawCtx.clearRect(0, 0, drawCanvas.offsetWidth, drawCanvas.offsetHeight);\r\n    if (canvasPen.imageData != null) {\r\n      drawCtx.putImageData(\r\n        canvasPen.imageData,\r\n        0,\r\n        0,\r\n        0,\r\n        0,\r\n        drawCanvas.offsetWidth,\r\n        drawCanvas.offsetHeight\r\n      );\r\n    }\r\n    drawCtx.beginPath();\r\n    drawCtx.lineWidth = canvasPen.lineWidth;\r\n    drawCtx.arc(\r\n      canvasPen.beginX,\r\n      canvasPen.beginY,\r\n      Math.abs(e.clientX - canvasPen.beginX),\r\n      0,\r\n      2 * Math.PI\r\n    );\r\n    drawCtx.strokeStyle = canvasPen.color;\r\n    drawCtx.stroke();\r\n    drawCtx.closePath();\r\n  },\r\n  eraFn: function (e: MouseEvent) {\r\n    const x = e.pageX - drawCanvas.offsetLeft;\r\n    const y = e.pageY - drawCanvas.offsetTop;\r\n    drawCtx.lineTo(x, y);\r\n    drawCtx.strokeStyle = \"#fff\";\r\n    drawCtx.lineWidth = canvasPen.lineWidth;\r\n    drawCtx.lineCap = \"round\";\r\n    drawCtx.lineJoin = \"round\";\r\n    drawCtx.stroke();\r\n  },\r\n};\r\n\r\nconst lineBtn = document.querySelector(\".line\") as HTMLElement;\r\nlineBtn.onclick = function () {\r\n  allBtns.forEach((item) => {\r\n    item.classList.remove(\"active\");\r\n  });\r\n  lineBtn.classList.add(\"active\");\r\n  canvasPen.type = \"line\";\r\n};\r\n\r\nconst rectBtn = document.querySelector(\".rect\") as HTMLElement;\r\nrectBtn.onclick = function () {\r\n  allBtns.forEach((item) => {\r\n    item.classList.remove(\"active\");\r\n  });\r\n  rectBtn.classList.add(\"active\");\r\n  canvasPen.type = \"rect\";\r\n};\r\n\r\nconst arcBtn = document.querySelector(\".arc\") as HTMLElement;\r\narcBtn.onclick = function () {\r\n  allBtns.forEach((item) => {\r\n    item.classList.remove(\"active\");\r\n  });\r\n  arcBtn.classList.add(\"active\");\r\n  canvasPen.type = \"arc\";\r\n};\r\n\r\nconst eraBtn = document.querySelector(\".era\") as HTMLElement;\r\neraBtn.onclick = function () {\r\n  allBtns.forEach((item) => {\r\n    item.classList.remove(\"active\");\r\n  });\r\n  eraBtn.classList.add(\"active\");\r\n  canvasPen.type = \"era\";\r\n};\r\n\r\nconst lineDivs = document.querySelectorAll(\".width\") as NodeListOf<HTMLElement>;\r\nlineDivs.forEach((item, index) => {\r\n  item.onclick = () => {\r\n    lineDivs.forEach((lineItem) => {\r\n      lineItem.classList.remove(\"active\");\r\n    });\r\n    item.classList.add(\"active\");\r\n    switch (index) {\r\n      case 0:\r\n        canvasPen.lineWidth = 6;\r\n        break;\r\n      case 1:\r\n        canvasPen.lineWidth = 16;\r\n        break;\r\n      case 2:\r\n        canvasPen.lineWidth = 32;\r\n        break;\r\n    }\r\n  };\r\n});\r\n\r\nconst colorInput = document.getElementById(\"color\") as HTMLInputElement;\r\ncolorInput.onchange = (e) => {\r\n  canvasPen.color = colorInput.value;\r\n};\r\n\r\ndrawCanvas.onmousedown = function (e) {\r\n  canvasPen.isDraw = true;\r\n  const x = e.pageX - drawCanvas.offsetLeft;\r\n  const y = e.pageY - drawCanvas.offsetTop;\r\n  switch (canvasPen.type) {\r\n    case \"rect\":\r\n      canvasPen.beginX = x;\r\n      canvasPen.beginY = y;\r\n      break;\r\n    case \"arc\":\r\n      canvasPen.beginX = x;\r\n      canvasPen.beginY = y;\r\n      break;\r\n    case \"line\":\r\n      canvasPen.beginX = x;\r\n      canvasPen.beginY = y;\r\n      drawCtx.beginPath();\r\n      drawCtx.moveTo(x, y);\r\n      break;\r\n    case \"era\":\r\n      canvasPen.beginX = x;\r\n      canvasPen.beginY = y;\r\n      drawCtx.beginPath();\r\n      drawCtx.moveTo(x, y);\r\n      break;\r\n  }\r\n};\r\n\r\ndrawCanvas.onmouseup = function () {\r\n  canvasPen.imageData = drawCtx.getImageData(\r\n    0,\r\n    0,\r\n    drawCanvas.offsetWidth,\r\n    drawCanvas.offsetHeight\r\n  );\r\n  canvasPen.isDraw = false;\r\n  if (canvasPen.type === \"line\") {\r\n    drawCtx.closePath();\r\n  }\r\n};\r\n\r\ndrawCanvas.onmousemove = function (e) {\r\n  if (canvasPen.isDraw) {\r\n    const strFn = canvasPen.type + \"Fn\";\r\n    canvasPen[strFn](e);\r\n  }\r\n};\r\n\r\nconst clearBtn = document.querySelector(\".clearCanvas\") as HTMLElement;\r\nclearBtn.onclick = function () {\r\n  canvasPen.imageData = null\r\n  drawCtx.clearRect(\r\n    0,\r\n    0,\r\n    Number(drawCanvas.getAttribute(\"width\")),\r\n    Number(drawCanvas.getAttribute(\"height\"))\r\n  );\r\n};\r\n\r\nconst saveBtn = document.querySelector(\".saveCanvas\") as HTMLElement;\r\nsaveBtn.onclick = function () {\r\n  const url = drawCanvas.toDataURL();\r\n  const a = document.createElement(\"a\");\r\n  a.download = \"sunshine\";\r\n  a.href = url;\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n};\r\n"],"names":["$655ef1679d5a4c39$var$allBtns","document","querySelectorAll","$655ef1679d5a4c39$var$drawCanvas","getElementById","$655ef1679d5a4c39$var$drawCtx","getContext","setAttribute","String","offsetWidth","offsetHeight","$655ef1679d5a4c39$var$canvasPen","type","isDraw","beginX","beginY","lineWidth","imageData","color","lineFn","e","x","pageX","offsetLeft","y","pageY","offsetTop","clearRect","putImageData","lineTo","strokeStyle","lineCap","lineJoin","stroke","rectFn","beginPath","rect","closePath","arcFn","arc","Math","abs","clientX","PI","eraFn","$655ef1679d5a4c39$var$lineBtn","querySelector","onclick","forEach","item","classList","remove","add","$655ef1679d5a4c39$var$rectBtn","$655ef1679d5a4c39$var$arcBtn","$655ef1679d5a4c39$var$eraBtn","$655ef1679d5a4c39$var$lineDivs","index","lineItem","$655ef1679d5a4c39$var$colorInput","onchange","value","onmousedown","moveTo","onmouseup","getImageData","onmousemove","strFn","Number","getAttribute","url","toDataURL","a","createElement","download","href","body","appendChild","click","removeChild"],"version":3,"file":"index.dd515c2c.js.map"}